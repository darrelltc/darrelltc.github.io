<!DOCTYPE html>
<html>

 <head>

  <meta charset="utf-8"/>
<title>重温缠师的经典语录</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>

  <link href="css/style.css" rel="stylesheet"/>
  <link rel="icon" href="./photos/favicon.jpg" type="image/jpeg">
  <script src="js/script.js" type="text/javascript">

  </script>

 </head>

 <body onload="CheckLocation();">

  <div class="page_wrap">

   <div class="page_header">

    <div class="content">

     <div class="text bold">
重温缠师的经典语录 
     </div>

    </div>

   </div>

   <div class="page_body chat_page">

    <div class="history">

     <div class="message service" id="message-1">

      <div class="body details">
8 January 2024
      </div>

     </div>

     <div class="message default clearfix" id="message391">

      <div class="pull_left userpic_wrap">

       

      </div>

      <div class="body">

       

       

       <div class="text">
<br><strong>重温缠师的经典语录（一）</strong><br><br>市场上的真正成功者，是以十年为单位的，无何你开始有多少钱，10年都足以让你上一个足够大的台阶。<br><br>市场中，唯一需要考虑的，就是对操作水平的提高，这是一切的根本。<br><br>市场真正的成功，都是在严格的操作下完成的。操作失误了有什么大不了的，市场的机会不断涌现，一个严格的操作程序，足以保证你长期的成功。<br><br>市场很简单，就如同生活，在一定的韵律中生长出利润。只有那韵律，那平凡但又能长久的盈利模式，才能使你战胜市场。<br><br>你不需要如赌徒一样整天烦躁不安，又期盼又恐惧，折腾不休。你只要平静地按照自己的韵律，按照市场的显现去与日俱增地强大自己。错过了，就错过了，后面有无数的机会等着。<br><br>你，不需要把自己设计为超人。超人是不需要设计的，超人是干出来的。你能长期地战胜市场，你就是市场的超人。因为市场的原则就是只有最少数的人才能长期战胜市场，你不是超人，谁还是？
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message392">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（二）</strong><br><br>市场的节奏只有一个：买点买，卖点卖。这么简单的问题，一直遵守的人能有几个？是什么阻止你倾听市场的节奏？是你的贪婪与恐惧。买点，总在下跌中形成，但恐惧阻止了你；卖点，总在上涨中形成，但贪婪阻止了你。一个被贪婪与恐惧所支配的人，在市场中唯一的命运就是：死！<br><br>市场中，买点上的股票就是好股票，卖点上的股票就是坏股票，除此之外的好坏分类，都是瞎掰。<br><br>市场不是赌场，市场的操作是可以精心安排的。当你买入时，你必须问自己，这是买点吗？这是什么级别的什么买点？大级别的走势如何？当下各级别的中枢分布如何？大盘的走势如何？该股所在板块如何？而卖点的情况类似。你对股票的情况分析得越清楚，操作才能更得心应手。<br><br>节奏，永远地，只有市场当下的节奏；谁，只要与此节奏对抗，只有痛苦与折磨在等待，一定注意：所谓的心态好不是如被虐狂般忍受市场节奏错误后的折磨。很多人，错了，就百忍成钢，在市场中是完全错误的。市场中，永远有翻身的机会，前提是你还有战斗的能力。一旦发现节奏错误，唯一正确的就是跟上节奏。<br><br>与市场共舞，你的贪婪与恐惧一一剥落，你会变得光明无比。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message393">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（三）</strong><br><br>本ID说过，要学本ID的理论，首先要“洗心革面”。为什么？因为你前面一切关于股票的知识，可能都是后面学习的毒药。在本ID这里，只有严格分类后的不同操作类型，没有其他那么多无聊的不切边际的所谓预测。<br><br>一句话，来本ID这里学习，第一层次，就是要达到：当机立断。<br><br>机会，是可以预先分析的，但这分析，不是预测，而是建立在完全分类基础上的边界划分，这划分完全来自本ID理论的纯数学构造，这构造的唯一性与精确性保证了这分类与边界的当下确认性。<br><br>其实，这问题已经说过，但必须再次说，这是一种完全不同的思维方式，如果你不能明白，就永远与本ID的理论无缘。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message394">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（四）</strong><br><br>买卖点是有级别的，大级别能量没耗尽时，一个小级别的买卖点引发大级别走势的延续，那是最正常不过的。<br><br>但如果一个小级别的买卖点和大级别的走势方向相反，而该大级别走势没有任何衰竭，这时候参与小级别买卖点，就意味着冒着大级别走势延续的风险，这是典型的刀口舔血。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message395">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（五）</strong><br><br>所有预测的基础，就是分类，把所有可能的情况进行完全分类。<br><br>有人可能说，分类以后，把不可能的排除，最后一个结果就是精确的。这是脑子锈了的想法，任何的排除，等价于一次预测，每排除一个分类，按概率的乘法原则，就使得最后的所谓精确变得越不精确。<br><br>对于预测分类的唯一正确原则就是不进行任何排除，而是要严格分清每种情况的边界条件。<br><br>边界条件分段后，就要确定一旦发生哪种情况就如何操作，也就是把操作也同样给分段化了，然后，把所有情况交给市场本身，让市场自己去当下选择。<br><br>这就是最本质的预测，不测而测，让市场自己去选择。<br><br>一般来说，喜欢预测的人，通常都是神经过敏，操作低下，喜欢忽悠之辈。<br><br>问题不是去预测什么，而是确定分段边界。<br><br>世界金融市场的历史一直在证明，真正成功的操作者，从来都不预测什么。<br>真正的操作者，都有一套操作的原则，按照原则来，就是最好的预测。<br><br>给出分段边界，就是给出最精确的预测，所有的预测都是当下给出的，这才是真正的预测。<br><br>这种预测，不需要任何概率化的无聊玩意，也没有所谓预测成功的忽悠或兴奋。这种预测的成功每一当下都发生着，每一当下都要忽悠兴奋一下，这人脑子早锈掉了。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message396">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（六）</strong><br><br>靠研究公司基本面买股票，那种积累速度太慢，只适合大资金。<br><br>其实，一切关于基本面的研究，最终都归于行业或总体经济的发展。最简单，最不伤脑筋的方法，本ID也说过，就是买指数基金或具体行业，板块的基金。<br><br>对于散户来说，最终能战胜市场，获得超越市场的回报的，只有在本ID所说的乘法原则下的技术面操作。<br><br>技术面是三个独立系统里的一个，而另外两个，例如比价关系和基本面，可以配合决定你的介入种类。但当介入到一个品种后，技术面在操作上就起着决定性的意义。为什么？因为其他的面，变化的频率都没有技术面高，像基本面，其变化大致是有一定的稳定性，不可能天天都是奇点，断裂点。比价关系也一样，一种比价确立后，就基本保持稳定了，不可能天天都变化。所以这种变化少的系统，不需要化太多精力去研究，而技术面显然不同。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message397">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（七）</strong><br><br>别小看了最基础的分段技术，最猛烈的中枢移动中，往往就是一个线段的类趋势，所谓的单边跌势或涨势，就是这玩意儿，明白了，你说你能不爽吗？<br><br>（过去的6个交易日，是真碰到这种情况了，连一个1分钟中枢都没有出现，只是线段的类趋势）</strong>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message398">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（八）</strong><br><br>再强调一次，没分清级别之前就别谈什么背驰。所谓背了又背是天经地义的事情，但对应的是不同级别，否则，难道一个1分钟背驰就可以让大盘转向1000年，那不乱套了？本ID理论的基础之一是级别，不学会并完全机械化地精确把握，那还是别背驰了，因为这种水平，除了背还是背，还驰什么？<br><br>至于那连笔和线段都没分清楚，在线段上竟然敢大谈什么背驰的，就虚心点去读书。让本ID一个早被判四期绝症的病人每天还分什么笔、线段图放上来的，你好意思，本ID都不好意思。因为功夫是你自己的，你自己不磨炼，万一本ID有什么闪失的，你又去哪里找陪练？<br><br>可以断言，本ID万一有什么闪失，关于本ID的理论就会被折腾得完全变样，有2的张某某次方变种，结果，最终能在市场上真磨炼成钢铁战士的，能有5个，本ID就含笑九泉了。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message399">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（九）</strong><br><br>本ID最鄙视一种人，就是从来不看走势，请你自己反省一下，大盘4小时，你都干了些什么？每天的走势，无数的资金在那里画出来的，世界上最昂贵的图画，你不去好好欣赏，从中修炼，想想自己都干了些什么，你有这资格吗？<br><br>特别对于初学者，走势中的每一秒钟，你都要尽可能学会解读市场的语言，你不从此全身心地和走势合为一体，就想战胜市场？做梦去吧。<br><br>本ID的理论，就是市场语言的语法，但光会语法，你能真正学会语言吗？你不每天去练习，有这可能吗？<br><br>市场哪里有便宜而来，不费力气的成功？醒醒吧。<br><br>简单地说，战胜市场，就是战胜市场的合力，就是战胜那构成合力的绝大多数人，你不成为这所有市场参与者中最顶尖的那一部分，那么，谈论成功都是废话。这是一场人与人智力，体力，资金等综合的搏杀，是血与血的争斗。<br><br>偷心不死，永无出期。
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message400">

      <div class="pull_left userpic_wrap">

       

      </div>

      <div class="body">

       

       

       <div class="text">
<br><strong>重温缠师的经典语录（十）</strong><br><br>技术分析的最终意义不是去预测市场要干什么，而是市场正在干什么，是一种当下的直观。<br>市场上所有的错误都是离开了这当下的直观，用想象、用情绪来代替。<br><br>走势是怎么出来的？<br>是用钱堆出来的！<br>在这资本的社会里，又有什么比用实在的钱堆出来的更可信？<br>除了走势，又有什么是更值得相信的？<br>而那些更值得相信的东西，又有哪样不是建筑在金钱之上的？<br>资本市场就是一个金钱的游戏，除了钱，还是钱。<br>只有钱是唯一值得信任的，而钱在市场上运动的轨迹，就是走势。<br>这是市场中唯一可以观察与值得观察的东西。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message401">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十一）</strong><br><br>在某个阶段，你可能会形成这样一种感觉，你如同站在重重叠叠的连绵走势中，而当下的趋向，仿佛照亮着层层叠叠的走势，那时候，你往往可以忘记中枢之类的概念，所有的中枢，按照各自的级别，仿佛都变成大小不同的迷宫关口，真正的路只有一条，而你的心直观当下地感应着，说实在的，当有了这种市场清晰的直觉，才算到门口了。<br><br>那时候，就如同看一首诗，如果还从语法等去分析，就如同还用中枢等去分析一样，而真正的有感觉的读者，是不会计较于各种字句的纠缠的，整体的直观当下就呈现了，一首诗就如同一个自足的世界，你当下就全部拥有了。<br><br>市场上的直观，其实也是一样的。只要那最细微的苗头一出来，就当下地领悟了，这才算是对市场走势这伟大诗篇一个有点合格的阅读。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message402">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十二）</strong><br><br>如果你对市场有了足够的洞察，那么，任何人的鬼把戏，都无效了，这才是最重要的。<br><br>市场里，需要的是智慧，而不是煽情。<br><br>认清自己，冷静再冷静吧。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message403">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十三）</strong><br><br>本ID只知道，在资本市场里，最无耻的行为就是亏钱、被套，只要你在市场上，远离这种行为，那你自然就是一个高尚的人，脱离了低级趣味的人，可以鄙视所有宣称你无耻的人的人。<br><br>市场比打仗更无情，打仗输了，还会有无耻文人，忽悠点这英雄那豪杰的，蒙骗一下少年儿童。市场输了，连尸骨都不会有人替你收。有人喜欢温情，喜欢有人说软话温暖一下破碎的心，那是有病。这种人，在市场中永远只有一种命运：死。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message404">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十四）</strong><br><br>多空齐杀，找准机会落井下石，突施冷箭，这从来都是震荡行情中的不二法门。震荡中的利润，从来都是在多头空头的尸骸中炼出来的，虽然残忍，却是震荡行情的生存之道。<br><br>市场中，最大的残忍就是把自己送上断头台；市场中，最崇高的道德就是踩着节奏错乱者的尸骸前行。市场就是市场，装道德孙子的，不是早死的就是即将死的，有必要听他们的道德说教吗？<br><br>当然，请一定注意。当你还没有成为钢铁战士之前，还有一个最好的全身之道：就是在大级别的调整中紧抱小板凳，不参与一切的反弹。<br><br>宁愿错过，绝不过错，伟大光荣正确的小板凳。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message405">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十五）</strong><br><br>技术上，周线，月线上底分型已经构造完成的股票，显然是最值得关注的。<br><br>当然，如果你的手脚特别麻利，日线上底分型构造完成的也可以注意的。<br><br>如果再进一步考察个股，就要看他在大的级别中是什么类型的中枢位置，这可以进一步确认较大力度爆发的可能性。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message406">

      <div class="body">

        <div class="text">
<br><strong>重温缠师的经典语录（十六）</strong><br><br>这里顺便上上课，前面说过，明白了陷阱，你的技术水平就会高多了。<br><br>
什么是陷阱？陷阱必须由中枢而来，所谓陷阱，归根结底都是中枢震荡的结果。<br><br>
如果不是中枢震荡，而是中枢移动，那就不可能是陷阱，而是真陷进去了。<br><br>
陷阱与非陷阱最关键的区别，除了是否中枢震荡外，就是力度上的前后比较问题了，这需要好好去研究，真研究明白，变成自己的直观，那才真有用的。<br><br>
通俗来讲，做反弹，就是逐步掂上去，在一个新水平，等足够多的人认同了，再掂高一点，等哪天认同减少或风声不对，就突然过河拆桥，这样，主力才有可能全身而退。否则都是主力自己拉，那不是送死吗？<br><br>
※※※如果你的股票已经出现周底分型的确认，那么就以五周均线为参照持有就可以，不必太注意大盘的震荡。<br><br>
当然，如果你手脚特麻利，那就可以来回短跑，一般人就算了。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message406">

      <div class="body">      

       <div class="text">
<br><strong>重温缠师的经典语录（十七）</strong><br><br>由于已经有了两个中枢，所以后面即使不背驰，也进入该小心的时候。<br><br>背驰必须发生在中枢的第三类买卖点之后，连第三类买卖点都没出现，哪里会有背驰？<br><br>一般第二个中枢以后的第三类买卖点都没有操作价值，你只有等到整个走势类型完成就可以，因为根据正确的理念，你必须在第一个中枢的第三类买卖点就完成最后的操作，以后的都是没多大意义的。<br><br>你根本无须预测，让市场自动当下告诉你。当然，如果你看不懂市场的语言，那是你自己的问题，而不是市场的问题。<br><br>市场，总是在这种各级别的相生相克中前行，一根筋思维注定没戏。<br><br>（恰好，现在上证指数是从2976下跌以来的第二个中枢震荡，a+A+b+B+c，而且c已不背驰，也今天正好大概率要形成第二个中枢的三卖，缠师的这几句话真好象是当下的应景式的教导。<br>此处，虽然没有底背驰，虽然要形成三卖，但要小心，不能一根筋，当然这里是小心下跌走势类型的结束，原因没有其他：已经两个中枢了）</strong>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message407">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十八）</strong><br><br>震荡是好事，特别对手脚麻利，技术高强的，最好就荡个千把回，3000%的利润都出来了。<br><br>当然，对于技术不好的，震荡就是坐电梯，上上下下享受；<br><br>对于心态更不好的，那震荡就是噩梦，左右被巴掌。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message408">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（十九）</strong><br><br>中枢震荡，除了打差价外，对于散户，最好就是不断换股。当然，这需要你对板块的轮动特别有节奏感，因为在上升中途的震荡中，往往个股行情少不了，特别是题材或中小盘的。震荡高点砸出短线前途不大，震荡低点买入短线前途更大的，这样你的效率是最高的。<br><br>如何判断一个股票有没有短线前途？这种问题没必要问了，你说一个刚顶背驰的股票有钱途还是刚开始第一次中枢上移的股票有短线前途？你说一个刚进入大阻力区的股票有短线前途还是刚确认脱离阻力区的股票有短线前途？其他的情况，可以自己去摸索，归根结底，图形告诉你一切。
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message409">

      <div class="body">

       

       <div class="text">
<br><strong>重温缠师的经典语录（二十）</strong><br><br>炒股票，对于中短线来说，有什么比周线都出现向上笔的延续更理想的状况？在这种情况下，你的利润就有了一个超稳定的保障系统给予最强有力的保障并使得该利润尽可能地延伸。<br><br>当然，如果技术高的，在周的（1，1）</strong>延伸里，也可以利用更低级别的走势搞出不少差价来，或者通过不同级别的震荡换股达到利润最大化。<br>但这是对技术高的说的，如果没那技术，就天天睡觉，顺便可流点口水，每天收盘看看周顶分有没有出现，然后继续睡大觉，这样就足以让你比很多人厉害了。
       </div>

      </div>

     </div>

    </div>

   </div>

  </div>

<!-- 目录按钮 -->
<a href="index.html" id="goToc" title="目录">☰</a>

<!-- 回顶部按钮 -->
<a href="#" id="backToTop" title="回到顶部">⮙</a>
 </body>

   <!-- 🔧 固定右侧工具栏 -->
<style>

/* =========================
   右侧工具栏显示策略
   ========================= */

/* 桌面端及平板：正常显示 */
@media (min-width: 1024px) {
  #toolbox {
    position: fixed;
    top: 100px;
    right: 20px;
    width: 220px;
    display: block;
  }
}

/* 平板及以下：直接隐藏 */
@media (max-width: 1024px) {
  #toolbox {
    display: none !important;
  }
  #backToTop {
    display: none !important;
  }
}

#toolbox {
  position: fixed;
  top: 100px;
  right: 20px;
  width: 220px;
  background: #C1E6C6;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  font-family: sans-serif;
  z-index: 9999;
}

#toolbox h4 {
  margin-top: 0;
  font-size: 16px;
  text-align: center;
}

#toolbox input {
  width: 100%;
  padding: 5px;
  font-size: 14px;
  box-sizing: border-box;
  margin-bottom: 6px;
  background-color: #C1E6C6;
  border: 1px solid #bbb;
  border-radius: 4px;  
}

#toolbox button {
  width: 100%;
  padding: 5px;
  margin-top: 4px;
  font-size: 14px;
  cursor: pointer;
  background-color: #C1E6C6;
  border: 1px solid #bbb;
  border-radius: 4px;
}

mark {
  background-color: yellow;
  font-weight: bold;
}

#pageFooter {
  width: 100%;
  text-align: center;
  font-family: Arial, sans-serif;
  font-size: 16px;
  color: #ffffff;
  background-color: #3399ff;
  padding: 32px 0;
}

/* 目录 + 回顶部 共用风格 */
#goToc,
#backToTop {
  position: fixed;
  right: 20px;
  width: 44px;
  height: 44px;
  line-height: 44px;
  text-align: center;
  font-size: 22px;
  color: #fff;
  background-color: #3399ff;
  border-radius: 50%;
  text-decoration: none;
  z-index: 9999;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* 目录在上 */
#goToc {
  bottom: 60px;
}

/* 回顶部在下 */
#backToTop {
  bottom: 10px;
}

/* 显示状态 */
#backToTop.show {
  opacity: 1;
  pointer-events: auto;
}

/* 悬停反馈 */
#backToTop:hover {
  transform: translateY(-4px);
}
#goToc:hover {
  transform: translateY(-4px);
}

</style>

<script>
function jumpTo(keyword) {
  // 1. 找到简介所在的 message
  const intro = document.querySelector('.intro');
  if (!intro) return;

  const introMessage = intro.closest('.message');
  if (!introMessage) return;

  // 2. 从简介 message 的下一个兄弟节点开始
  let node = introMessage.nextElementSibling;

  while (node) {
    // 只在正文 message 中找
    if (node.classList.contains('message') &&
        node.classList.contains('default')) {

      const walker = document.createTreeWalker(
        node,
        NodeFilter.SHOW_TEXT,
        null,
        false
      );

      while (walker.nextNode()) {
        const textNode = walker.currentNode;
        if (textNode.nodeValue &&
            textNode.nodeValue.includes(keyword)) {

          textNode.parentElement.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
          });
          return;
        }
      }
    }

    node = node.nextElementSibling;
  }

  alert('正文中未找到对应章节');
}
</script>

<div id="toolbox">
  <h4>🔍 页面工具</h4>
  <input type="text" id="searchInput" placeholder="输入关键词" onkeydown="handleKey(event)">
  <button onclick="searchText()">搜索</button>
  <button onclick="clearHighlights()">清除高亮</button>
  <hr>
  <button onclick="setBookmark()">📌 设为阅读位置</button>
  <button onclick="goToBookmark()">📖 跳转到阅读位置</button>
</div>

<script>
function searchText() {
  clearHighlights();
  const keyword = document.getElementById("searchInput").value.trim();
  if (!keyword) return;

  const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false);
  const nodes = [];
  while (walker.nextNode()) {
    nodes.push(walker.currentNode);
  }

  nodes.forEach(node => {
    const parent = node.parentNode;
    if (parent.tagName !== "SCRIPT" && parent.tagName !== "STYLE") {
      const text = node.nodeValue;
      if (text && text.toLowerCase().includes(keyword.toLowerCase())) {
        const span = document.createElement("span");
        span.innerHTML = text.replace(new RegExp(keyword, 'gi'), match => `<mark>${match}</mark>`);
        parent.replaceChild(span, node);
      }
    }
  });
}

function clearHighlights() {
  document.querySelectorAll("mark").forEach(el => {
    el.replaceWith(document.createTextNode(el.textContent));
  });
}

function setBookmark() {
  const scrollY = window.scrollY;
  localStorage.setItem("bookmarkPosition", scrollY);
  alert("📌 已保存阅读位置");
}

function goToBookmark() {
  const y = localStorage.getItem("bookmarkPosition");
  if (y !== null) {
    window.scrollTo(0, parseInt(y));
  } else {
    alert("⚠️ 尚未设置阅读位置");
  }
}

function searchText() {
  clearHighlights();
  const keyword = document.getElementById("searchInput").value.trim();
  if (!keyword) return;

  const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false);
  const nodes = [];
  while (walker.nextNode()) {
    nodes.push(walker.currentNode);
  }

  let firstMatchElement = null;

  nodes.forEach(node => {
    const parent = node.parentNode;
    if (parent.tagName !== "SCRIPT" && parent.tagName !== "STYLE") {
      const text = node.nodeValue;
      if (text && text.toLowerCase().includes(keyword.toLowerCase())) {
        const span = document.createElement("span");
        span.innerHTML = text.replace(new RegExp(keyword, 'gi'), match => {
          // 用 mark 标签高亮
          return `<mark class="search-match">${match}</mark>`;
        });
        parent.replaceChild(span, node);

        // 第一次匹配，记录下来滚动用
        if (!firstMatchElement) {
          firstMatchElement = span.querySelector("mark");
        }
      }
    }
  });

  // 滚动到第一个匹配的高亮位置
  if (firstMatchElement) {
    firstMatchElement.scrollIntoView({ behavior: "smooth", block: "center" });
  } else {
    alert("未找到关键词");
  }
}

function clearHighlights() {
  document.querySelectorAll("mark.search-match").forEach(el => {
    el.replaceWith(document.createTextNode(el.textContent));
  });
}

function setBookmark() {
  const scrollY = window.scrollY;
  localStorage.setItem("bookmarkPosition", scrollY);
  alert("📌 已保存阅读位置");
}

function goToBookmark() {
  const y = localStorage.getItem("bookmarkPosition");
  if (y !== null) {
    window.scrollTo({ top: parseInt(y), behavior: "smooth" });
  } else {
    alert("⚠️ 尚未设置阅读位置");
  }
}

function handleKey(event) {
  if (event.key === "Enter") {
    searchText();
  }
}

</script>

  <!-- 页面内容结束后，放脚本 -->
<script>
(function () {
  function processPhotos() {
    document.querySelectorAll('img.photo').forEach(img => {
      if (img.dataset.inited) return;
      img.dataset.inited = '1';

      Object.assign(img.style, {
        display: 'block',
        margin: '0 auto',
        maxWidth: '100%',
        width: '100%',
        height: 'auto',
        borderRadius: '6px'
      });

      if (!img.closest('a')) {
        const a = document.createElement('a');
        a.href = img.src;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        img.parentNode.insertBefore(a, img);
        a.appendChild(img);
      }
    });
  }

  processPhotos();

  // 防止懒加载 / 动态插入
  new MutationObserver(processPhotos)
    .observe(document.body, { childList: true, subtree: true });
})();
</script>

<!-- =========================
     页面底部版权 Footer
     ========================= -->
<footer id="pageFooter">
  <div class="footer-main">
    © 2025 ~ <span id="year"></span> By Utien<br>
    萌 ICP 备 010120261830 号
  </div>

  <div class="footer-stats">
    阅读量： <span id="visitCount">-</span> 次
  </div>
</footer>
<script>
  // 年份
  document.getElementById('year').textContent = new Date().getFullYear();

  const backToTop = document.getElementById('backToTop');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      backToTop.classList.add('show');
    } else {
      backToTop.classList.remove('show');
    }
  });

  backToTop.addEventListener('click', e => {
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

(function () {
  var el = document.getElementById('visitCount');
  if (!el) return;

  var pageId = location.pathname.replace(/\W+/g, '_');

  fetch('https://vc.ctien.de5.net/count?page=' + pageId)
    .then(r => r.json())
    .then(d => {
      el.textContent = d.count;
    })
    .catch(() => {});
})();
</script>
</html>


